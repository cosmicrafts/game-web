{"version":3,"sources":["../src/auth.js"],"names":["client","defaultOptions","cookie","auth","options","setOptions","opt","create","storage","MyStorage","AuthClient","getAgentOptions","identity","getIdentity","host","process","env","REACT_APP_IC_GATEWAY","constructor","my","get","key","set","value","remove"],"mappings":";;;;;;;AAAA;;AAEA,IAAIA,MAAM,GAAG,IAAb;AAEA,MAAMC,cAAc,GAAG;AAAEC,EAAAA,MAAM,EAAE;AAAV,CAAvB;AAEA,MAAMC,IAAI,GAAG;AACXH,EAAAA,MADW;AAEXI,EAAAA,OAAO,EAAEH;AAFE,CAAb;;;AAKAE,IAAI,CAACE,UAAL,GAAmBC,GAAD,IAAS;AACzBH,EAAAA,IAAI,CAACC,OAAL,GAAe,EAAE,GAAGH,cAAL;AAAqB,OAAGK;AAAxB,GAAf;AACD,CAFD;;AAIAH,IAAI,CAACI,MAAL,GAAc,YAAY;AACxB,QAAMC,OAAO,GAAG,IAAIC,SAAJ,EAAhB;AACAN,EAAAA,IAAI,CAACH,MAAL,GAAc,MAAMU,uBAAWH,MAAX,CAAkBJ,IAAI,CAACC,OAAL,CAAaF,MAAb,GAAsB,EAAtB,GAA2B;AAAEM,IAAAA;AAAF,GAA7C,CAApB;AACD,CAHD;;AAKAL,IAAI,CAACQ,eAAL,GAAuB,MAAM;AAC3B,MAAIC,QAAQ,GAAGT,IAAI,CAACH,MAAL,CAAYa,WAAZ,EAAf;AAEA,SAAO;AACLD,IAAAA,QADK;AAELE,IAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,oBAAZ,IAAoC;AAFrC,GAAP;AAID,CAPD,C,CASA;;;AAEA,MAAMR,SAAN,CAAgB;AACdS,EAAAA,WAAW,GAAG;AACZ,SAAKC,EAAL,GAAU,EAAV;AACD;;AAEQ,QAAHC,GAAG,CAACC,GAAD,EAAM;AACb,WAAO,KAAKF,EAAL,CAAQE,GAAR,CAAP;AACD;;AAEQ,QAAHC,GAAG,CAACD,GAAD,EAAME,KAAN,EAAa;AACpB,SAAKJ,EAAL,CAAQE,GAAR,IAAeE,KAAf;AACD;;AAEW,QAANC,MAAM,CAACH,GAAD,EAAM;AAChB,WAAO,KAAKF,EAAL,CAAQE,GAAR,CAAP;AACD;;AAfa","sourcesContent":["import { AuthClient } from \"@dfinity/auth-client\";\n\nlet client = null;\n\nconst defaultOptions = { cookie: false };\n\nconst auth = {\n  client,\n  options: defaultOptions,\n};\n\nauth.setOptions = (opt) => {\n  auth.options = { ...defaultOptions, ...opt };\n};\n\nauth.create = async () => {\n  const storage = new MyStorage();\n  auth.client = await AuthClient.create(auth.options.cookie ? {} : { storage });\n};\n\nauth.getAgentOptions = () => {\n  let identity = auth.client.getIdentity();\n\n  return {\n    identity,\n    host: process.env.REACT_APP_IC_GATEWAY || \"https://ic0.app\",\n  };\n};\n\n//\n\nclass MyStorage {\n  constructor() {\n    this.my = {};\n  }\n\n  async get(key) {\n    return this.my[key];\n  }\n\n  async set(key, value) {\n    this.my[key] = value;\n  }\n\n  async remove(key) {\n    delete this.my[key];\n  }\n}\n\nexport { auth as default };\n"],"file":"auth.js"}